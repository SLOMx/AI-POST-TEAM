```js
document.getElementById("postForm").addEventListener("submit", function (e) {
  e.preventDefault();const teamName = document.getElementById("teamName").value.trim();
  const playersNames = document.getElementById("playersNames").value.trim().split(",");
  const teamLogoFile = document.getElementById("teamLogo").files[0];
  const playersImagesFiles = Array.from(document.getElementById("playersImages").files);
  const preview = document.getElementById("postPreview");
  const downloadBtn = document.getElementById("downloadBtn");

  if (!teamLogoFile || playersImagesFiles.length === 0) {
    alert("يرجى رفع الشعار وصور اللاعبين.");
    return;
  }

  preview.innerHTML = "";

  // اسم الفريق
  const title = document.createElement("h2");
  title.textContent = `🎯 فريق: ${teamName}`;
  preview.appendChild(title);

  // شعار الفريق
  const logoImg = document.createElement("img");
  logoImg.className = "logo";
  logoImg.src = URL.createObjectURL(teamLogoFile);
  logoImg.alt = "لوجو الفريق";
  preview.appendChild(logoImg);

  // أسماء اللاعبين
  const namesList = document.createElement("p");
  namesList.textContent = "👥 اللاعبين: " + playersNames.map(name => name.trim()).join(", ");
  preview.appendChild(namesList);

  // صور اللاعبين
  const imagesContainer = document.createElement("div");
  playersImagesFiles.forEach(file => {
    const img = document.createElement("img");img.src = URL.createObjectURL(file);
    img.alt = "لاعب";
    imagesContainer.appendChild(img);
  });
  preview.appendChild(imagesContainer);

  // عرض زر التحميل
  downloadBtn.style.display = "inline-block";
});

document.getElementById("downloadBtn").addEventListener("click", () => {
  const post = document.getElementById("postPreview");
  html2canvas(post).then(canvas => {
    const link = document.createElement("a");
    link.download = "team-post.png";
    link.href = canvas.toDataURL("image/png");
    link.click();
  });
});

css
body {
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  direction: rtl;
}

#result {
  background: #121417;
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 0 15px #0d6efd88;
}

#result img {
  max-width: 300px;
  border-radius: 10px;
  margin: 10px auto;pImg.src = src;
        pImg.onload = () => {
          ctx.drawImage(pImg, xPos + i * (imgSize + 20), yPos, imgSize, imgSize);
          if (i === playersDataURLs.length - 1) {
            // عرض الصورة النهائية
            const dataURL = canvas.toDataURL("image/png");
            showResult(dataURL);
          }
        };
      });
    };
  } catch (error) {
    alert("حدث خطأ: " + error.message);
    loading.style.display = "none";
  }
});

function showResult(dataURL) {
  loading.style.display = "none";
  result.innerHTML = `
    <h3>النتيجة:</h3>
    <img src="dataURL" alt="بوست الفريق" />
    <a href="{dataURL}" download="team-post.png" class="btn btn-success mt-3">⬇️ تحميل البوست</a>
  `;
}

// دالة لفك التفاف النص داخل canvas
function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
  const words = text.split(" ");
  let line = "";
  for (let n = 0; n < words.length; n++) {
    const testLine = line + words[n] + " ";
    const metrics = ctx.measureText(testLine);
    const testWidth = metrics.width;
    if (testWidth > maxWidth && n > 0) {
      ctx.fillText(line, x, y);
      line = words[n] + " ";
      y += lineHeight;
    } else {
      line = testLine;
    }
  }
  ctx.fillText(line, x, y);
}
```
